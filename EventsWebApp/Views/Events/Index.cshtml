@using EventsWebApp.ViewModels
@model IEnumerable<EventListViewModel>
@{
    ViewData["Title"] = "Events";
}

<div class="page-header">
    <h1 class="page-title">Events</h1>
    <div class="action-buttons">
        <a href="@Url.Action("Create", "Events")" class="btn btn-primary">
            <i class="fas fa-plus"></i> New Event
        </a>
    </div>
</div>

<div class="filter-actions">
    <div class="tab-filter">
        <a href="#" class="tab-item active" data-status="active">Active <span>(48)</span></a>
        <a href="#" class="tab-item" data-status="draft">Draft <span>(22)</span></a>
        <a href="#" class="tab-item" data-status="past">Past <span>(32)</span></a>
    </div>

    <div class="search-filter">
        <div class="search-input-container">
            <i class="fas fa-search search-icon"></i>
            <input type="text" class="search-input" placeholder="Search events..." />
        </div>

        <div class="filter-controls">
            <select class="filter-dropdown">
                <option value="">All Categories</option>
                @if (ViewBag.Categories != null)
                {
                    foreach (var category in ViewBag.Categories)
                    {
                        <option value="@category.CategoryId">@category.Name</option>
                    }
                }
            </select>

            <div class="view-toggle">
                <button class="view-toggle-btn active" data-view="grid">
                    <i class="fas fa-th-large"></i>
                </button>
                <button class="view-toggle-btn" data-view="list">
                    <i class="fas fa-list"></i>
                </button>
            </div>
        </div>
    </div>
</div>

<div id="eventsContainer" class="events-grid">
    @if (Model != null && Model.Any())
    {
        foreach (var item in Model)
        {
            <div class="event-card">
                <div class="event-card-image">
                    <div class="category-badge">@item.EventCategory</div>
                </div>
                <div class="event-card-content">
                    <h3 class="event-card-title">@item.EventName</h3>
                    <div class="event-meta">
                        <div class="event-date-location">
                            @if (!string.IsNullOrEmpty(item.EventDate))
                            {
                                <div><i class="far fa-calendar"></i> @item.EventDate</div>
                            }
                            @if (!string.IsNullOrEmpty(item.EventTime))
                            {
                                <div><i class="far fa-clock"></i> @item.EventTime</div>
                            }
                            <div><i class="fas fa-map-marker-alt"></i> @item.Location</div>
                        </div>
                    </div>
                    <div class="event-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: @(item.TicketsSoldPercentage)%"></div>
                        </div>
                        <div class="progress-meta">
                            <span>@(item.TicketsSoldPercentage)% Tickets Sold</span>
                            <span class="event-price">
                                @if (item.StartingPrice.HasValue)
                                {
                                    @($"${item.StartingPrice.Value:F2}")
                                }
                                else
                                {
                                    <text>Price TBD</text>
                                }
                            </span>
                        </div>
                    </div>
                    <div class="event-actions">
                        <a href="@Url.Action("Details", "Events", new { id = item.EventId })"
                           class="btn btn-primary">
                            View Details
                        </a>
                    </div>
                </div>
            </div>
        }
    }
    else
    {
        <div class="no-events-message">
            <p>No events found. Try creating your first event!</p>
            <a href="@Url.Action("Create", "Events")" class="btn btn-primary">
                <i class="fas fa-plus"></i> Create Event
            </a>
        </div>
    }
</div>

<div class="pagination">
    <span>Showing @(Model?.Count() ?? 0) events</span>
    <div class="pagination-controls">
        <a href="#" class="page-btn prev"><i class="fas fa-chevron-left"></i></a>
        <a href="#" class="page-num active">1</a>
        <a href="#" class="page-num">2</a>
        <a href="#" class="page-num">3</a>
        <span class="page-ellipsis">...</span>
        <a href="#" class="page-num">8</a>
        <a href="#" class="page-btn next"><i class="fas fa-chevron-right"></i></a>
    </div>
</div>