@using EventsWebApp.Models.ViewModels
@model EventFormViewModel
@{
    ViewData["Title"] = "Event Details";
}

<h2>@(Model?.EventName ?? "Event Details")</h2>

<div class="card">
    <div class="card-body">
        @if (!string.IsNullOrEmpty(Model?.EventCategory))
        {
            <p><strong>Category:</strong> @Model.EventCategory</p>
        }

        @if (!string.IsNullOrEmpty(Model?.Description))
        {
            <p><strong>Description:</strong> @Model.Description</p>
        }

        @if (!string.IsNullOrEmpty(Model?.EventDate))
        {
            <p><strong>Date:</strong> @Model.EventDate</p>
        }

        @if (!string.IsNullOrEmpty(Model?.EventTime))
        {
            <p><strong>Time:</strong> @Model.EventTime</p>
        }

        @if (!string.IsNullOrEmpty(Model?.Location))
        {
            <p><strong>Location:</strong> @Model.Location</p>
        }

        @if (!string.IsNullOrEmpty(Model?.VenueName))
        {
            <p><strong>Venue:</strong> @Model.VenueName</p>
        }

        <p><strong>Capacity:</strong> @(Model?.Capacity ?? 0)</p>

        @if (Model?.TicketCategories != null && Model.TicketCategories.Any())
        {
            <h4>Tickets</h4>
            @foreach (var ticket in Model.TicketCategories)
            {
                <div class="ticket-info">
                    <strong>@ticket.TicketCategory</strong> - $@ticket.Price.ToString("F2")
                    <br />
                    @if (ticket.AvailableQuantity > 0)
                    {
                        <span>@ticket.AvailableQuantity available</span>
                    }
                    else
                    {
                        <span>Sold out</span>
                    }
                </div>
            }
        }
    </div>
</div>

<div class="mt-3">
    <a asp-action="Edit" asp-route-id="@Model?.EventId" class="btn btn-primary">Edit</a>
    <a asp-action="Index" class="btn btn-secondary">Back to Events</a>
</div>