@using EventsWebApp.Models.ViewModels
@model EventFormViewModel
@{
    ViewData["Title"] = "Event Details";
}

<h2>@(Model?.EventName ?? "Event Details")</h2>

<div class="card">
    <div class="card-body">
        @if (!string.IsNullOrEmpty(Model?.EventCategory))
        {
            <p><strong>Category:</strong> @Model.EventCategory</p>
        }

        @if (!string.IsNullOrEmpty(Model?.Description))
        {
            <p><strong>Description:</strong> @Model.Description</p>
        }

        @if (!string.IsNullOrEmpty(Model?.EventDate))
        {
            <p><strong>Date:</strong> @Model.EventDate</p>
        }

        @if (!string.IsNullOrEmpty(Model?.EventTime))
        {
            <p><strong>Time:</strong> @Model.EventTime</p>
        }

        @if (!string.IsNullOrEmpty(Model?.Location))
        {
            <p><strong>Location:</strong> @Model.Location</p>
        }

        @if (!string.IsNullOrEmpty(Model?.VenueName))
        {
            <p><strong>Venue:</strong> @Model.VenueName</p>
        }

        <p><strong>Capacity:</strong> @(Model?.Capacity ?? 0)</p>

        @if (Model?.TicketCategories != null && Model.TicketCategories.Any())
        {
            <h4>Tickets</h4>
            @foreach (var ticket in Model.TicketCategories)
            {
                <div class="ticket-info">
                    <strong>@ticket.TicketCategory</strong> - $@ticket.Price.ToString("F2")
                    <br />
                    @if (ticket.AvailableQuantity > 0)
                    {
                        <span>@ticket.AvailableQuantity available</span>
                    }
                    else
                    {
                        <span>Sold out</span>
                    }
                </div>
            }
        }
    </div>
</div>

<div class="mt-3" style="display: flex; gap: 0.75rem;">
    <a href="/Booking/Create?eventId=@Model?.EventId" target="_blank" class="btn btn-primary btn-lg">
        <i class="fas fa-ticket-alt"></i> Buy Tickets
    </a>
    <a asp-action="Edit" asp-route-id="@Model?.EventId" class="btn btn-primary">
        <i class="fas fa-edit"></i> Edit
    </a>
    <a asp-action="Index" class="btn btn-secondary">
        <i class="fas fa-arrow-left"></i> Back to Events
    </a>
    <form asp-action="Delete" asp-route-id="@Model?.EventId" method="post" style="display: inline;"
          onsubmit="return confirm('Are you sure you want to delete this event? This action cannot be undone.');">
        @Html.AntiForgeryToken()
        <button type="submit" class="btn btn-danger">
            <i class="fas fa-trash"></i> Delete Event
        </button>
    </form>
</div>